<%--

Copyright (c) 2012, The University of Edinburgh.
All Rights Reserved

--%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<%@ taglib prefix="fn" uri="http://java.sun.com/jsp/jstl/functions" %>
<%@ taglib prefix="form" uri="http://www.springframework.org/tags/form" %>
<%@ taglib prefix="utils" uri="http://www.ph.ed.ac.uk/utils" %>
<%@ taglib prefix="validator" tagdir="/WEB-INF/tags/validator" %>
<%--

This fragment formats a TestValidationResult

Model attributes:

testValidationResult: testValidationResult

--%>
<c:set var="resolvedAssessmentTest" value="${testValidationResult.resolvedAssessmentTest}"/>

<div class="resultPanel ${validationResult.valid ? 'success' : 'failure'}">
  <h3>Test validation ${validationResult.valid ? 'success' : 'failure'}</h3>
  <div class="details">
    <p>
      Your test
      ${validationResult.valid ? 'passed' : 'did not pass'}
      all of our validation checks. Further details are provided below:
    </p>
    <c:set var="rootObjectLookup" value="${resolvedAssessmentTest.rootObjectLookup}"/>
    <validator:xmlParseResults rootObjectLookup="${rootObjectLookup}"/>
    <%@ include file="validator-xml-schema-result.jspf" %>
    <%@ include file="validator-model-build-result.jspf" %>
    <%@ include file="validator-validation-result.jspf" %>

    <%-- Show item results --%>
    <c:forEach var="validationResult" items="${testValidationResult.itemValidationResults}">
      <c:set var="isTest" value="true"/>
      <%@ include file="validator-item-result.jspf" %>
    </c:forEach>
  </div>
</div>
